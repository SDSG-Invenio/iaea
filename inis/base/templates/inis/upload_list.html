{%- extends "page.html" -%}
{%- block body -%}

<h2>Upload list</h2>
</br>
<div class="table-responsive">
<table class="table table-striped table-condensed table-hover">
    <tr>
        <th class='text-center'><li class="list-group-item active">ID</li></th>
        <th class='text-center' style="width: 130px;"><li class="list-group-item active">Date</th>
        <th class='text-center'><li class="list-group-item active">Member</th>
        <th class='text-center'><li class="list-group-item active">Submitter</th>
        <th class='text-center'><li class="list-group-item active">Upload name</th>
        <th class='text-center' style="width: 20px;"><li class="list-group-item active">Rec#</th>
        <th class='text-center'><li class="list-group-item active">Files</th>
    </tr>
    {%- for u in uploads %}
        <tr data-toggle="collapse" data-target="#notes{{ u['id'] }}">
            <td class='text-center'><span class="badge">{{ u['id'] }}</span></td>
            <td class='text-center'>{{ u['date'] | string | truncate(16, killwords=True, end='') }}</td>
            <td>{{ u['member'] }}</td>
            <td>{{ u['submitter'] }}</td>
            <td>{{ u['upload_name'] }}</td>
            <td class='text-center'>{{ u['records'] }}</td>
            <td>{% with recid = u['recid'] %}
                    {{ format_record(recid, 'FILELINKS', ln=g.ln)|safe }}
                {% endwith %}
            </td>
        </tr>
        {% if u['notes'] %}
        <tr class="accordion-body collapse in" data-toggle="collapse" data-target="#notes{{ u['id'] }}" id="notes{{ u['id'] }}">
                <td colspan="3"></td>
                <td class='text-right'><span class="label label-primary"><b>Notes</b></span></td>
                <td colspan="3">
                    <div>{{ u['notes'] }}</div>
                </td>
        </tr>
        {% endif %}
    {%- endfor %}
</table>
</div>

{%- endblock body -%}
